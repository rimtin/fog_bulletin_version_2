
:root{
  --bg:#f6f7f9;
  --card-bg:#fff;
  --accent:#2563eb;
}

/* ---------- Base layout ---------- */
*{ box-sizing:border-box; }
html,body{
  margin:0; padding:0;
  background:var(--bg); color:#000;
  font-family:system-ui,-apple-system,Segoe UI,Roboto,Inter,Ubuntu,Arial,sans-serif;
}
.container{ max-width:1100px; margin:24px auto; padding:0 16px; }

/* --- Header --- */
.header{
  position: relative;
  display: flex;
  align-items: flex-end;
  gap: 16px;
  margin-bottom: 14px;
  padding-right: 140px;
}
.header .title-wrap{ flex:1 1 auto; text-align:center; }
.header .actions{ position:absolute; right:0; bottom:0; }

h1{
  margin:0 0 6px;
  font-weight:900;
  letter-spacing:.2px;
  text-align:center;
  font-size:clamp(28px,3.6vw,40px);
  color:#000;
}
.subhead{
  text-align:center;
  margin-top:2px;
  font-size:clamp(13px,1.6vw,16px);
  color:#000;
}
.btn{ background:var(--accent); color:#fff; border:0; padding:10px 14px; border-radius:10px; font-weight:600; cursor:pointer; }
.btn:hover{ filter:brightness(1.05); }

.card{ background:var(--card-bg); border:1px solid #e6e6e6; border-radius:14px; padding:14px; margin:12px 0 18px; }
.card h3{
  margin:4px 0 12px;
  font-size:clamp(18px,2.4vw,22px);
  font-weight:800;
  color:#000;
  text-align:center;
}

/* ---------- Tables ---------- */
.table-wrap{ overflow:auto; border-radius:12px; }
table{ width:100%; border-collapse:separate; border-spacing:0; table-layout:fixed; }

.data-table{
  border:0;
  outline:4px solid #000;
  border-radius:12px;
  overflow:hidden;
}
.data-table th, .data-table td{
  border:0;
  padding:10px 12px;
  font-size:14px;
  color:#000;
  text-align:center;
  vertical-align:middle;
  background-clip:padding-box;
}
.data-table thead th{
  background:#bfe6ff;
  font-weight:800;
}
.data-table tr>*{ border-right:3px solid #000; border-bottom:3px solid #000; }
.data-table tr>*:last-child{ border-right:3px solid #000 !important; }
.data-table thead tr>*{ border-top:3px solid #000; }
.data-table tr>*:first-child{ border-left:3px solid #000; }

/* ---------- Map cards ---------- */
.map-card{ padding:10px; border-radius:12px; background:#fff; border:1px solid #e6e6e6; margin:12px 0 18px; }
.map-card h4{ margin:6px 0 10px; font-weight:700; font-size:15px; color:#000; }

/* ---------- Notes / dialog ---------- */
.notes-box{
  width:100%;
  min-height:220px;
  resize:both;
  overflow:auto;
  border:3px solid #000;
  border-radius:10px;
  padding:10px;
  font-size:14px;
  color:#000;
  max-width:none;
  -webkit-overflow-scrolling:touch;
  white-space:pre-wrap;
}

/* ---------- Responsive ---------- */
@media (max-width:900px){
  .container{ padding:0 12px; }
  .table-wrap{ overflow-x:auto; }
  table{ min-width:820px; }
}
@media (max-width:640px){
  .header{ padding-right:0; align-items:center; }
  .header .actions{
    position:static; width:100%;
    display:flex; justify-content:center; margin-top:8px;
  }
  .btn{ width:max(180px,50%); }
  table{ min-width:740px; }
  .notes-box{ min-height:180px; }
}

/* ---------- Print layout (Browser Print) ---------- */
@page{ size:A4 portrait; margin:12mm; }
.print-page{ margin-bottom:24px; }
.screen-only{ display:block; }
.print-only{ display:none; }

@media print{
  body{ -webkit-print-color-adjust:exact; print-color-adjust:exact; color:#000; }
  .container{ max-width:none; margin:0; padding:0; }

  /* show printable notes, hide the editable notes */
  .print-only{ display:block !important; }
  .screen-only{ display:none !important; }

  /* Fix table clipping in browser print */
  .table-wrap{ overflow:visible !important; }
  table{ width:100% !important; min-width:0 !important; table-layout:auto !important; }
  .data-table th, .data-table td{ padding:8px 10px; font-size:12.5px; }
  .data-table tr{ break-inside:avoid; page-break-inside:avoid; }

  /* ✅ FIXED selector: notes-print (not notes-print-content) */
  #notes-print.notes-box{
    height:auto !important;
    max-height:none !important;
    min-height:0 !important;
    overflow:visible !important;
    resize:none !important;
    white-space:pre-wrap !important;
    word-break:break-word !important;
  }

  /* If any parent wrapper clips it */
  #notes-print-card, #notes-print-card *{
    overflow:visible !important;
  }
}

/* ================= PDF MODE FIX (html2pdf uses SCREEN CSS) ================= */

/* ✅ Fix tilted/warped PDF: disable transforms/filters/shadows during export */
body.pdf-mode *,
body.pdf-mode *::before,
body.pdf-mode *::after{
  transform: none !important;
  filter: none !important;
  perspective: none !important;
  box-shadow: none !important;
}

/* Stable capture */
body.pdf-mode{
  background:#fff !important;
  overflow: visible !important;
}

/* ✅ Cancel responsive min-width during PDF (this is a BIG fix) */
body.pdf-mode table{
  width:100% !important;
  max-width:100% !important;
  min-width:0 !important;          /* cancels 820px/740px */
  table-layout: fixed !important;
}

/* No clipping in capture */
body.pdf-mode .table-wrap{
  overflow: visible !important;
  overflow-x: hidden !important;
}

/* ✅ Next-line logic inside cells */
body.pdf-mode th,
body.pdf-mode td{
  white-space: normal !important;
  word-break: break-word !important;
  overflow-wrap: anywhere !important;
  line-height: 1.25 !important;
}

/* Slightly tighter for PDF only */
body.pdf-mode .data-table th,
body.pdf-mode .data-table td{
  padding: 6px 6px !important;
  font-size: 12px !important;
}

/* ✅ Notes: remove scrolling/resizing so full text is captured */
body.pdf-mode .notes-box{
  resize: none !important;
  overflow: visible !important;
  height: auto !important;
  max-height: none !important;
}

/* ✅ Remove max-width during PDF so html2canvas doesn’t scale weird */
body.pdf-mode .container{
  max-width: none !important;
  margin: 0 !important;
  padding: 0 16px !important;
}
